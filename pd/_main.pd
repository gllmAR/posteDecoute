#N canvas 886 30 300 295 10;
#X declare -path abs;
#X obj 92 25 declare -path abs;
#N canvas 231 154 644 530 gestionLieux 0;
#X obj 67 242 text define lieu;
#X obj 31 50 openpanel;
#X obj 31 16 bng 15 250 50 0 empty lieu.open lieu.open 17 7 0 10 -262144
-1 -1;
#X obj 259 115 list;
#X obj 32 141 list prepend read;
#X obj 67 209 list trim;
#X obj 259 148 list prepend write;
#X obj 259 82 bng 15 250 50 0 empty lieu.save lieu.save 17 7 0 10 -262144
-1 -1;
#X obj 50 325 until;
#X obj 50 382 t f f;
#X obj 50 357 f;
#X obj 97 383 + 1;
#X obj 50 303 t f b;
#X msg 91 325 0;
#X obj 77 456 list split 1;
#X obj 78 510 list;
#X obj 78 538 list trim;
#X obj 124 573 send;
#X obj 113 484 t b a;
#X obj 50 429 t a a;
#X obj 50 279 text size lieu;
#X obj 50 406 text get lieu;
#X obj 95 50 r lieu.read;
#X obj 446 149 list length;
#X obj 419 196 list split;
#X obj 446 170 - 1;
#X obj 419 124 t a a;
#X text 420 71 PAS DE CARACTERE SPECIAL NI ESPACE;
#X obj 419 101 pd-osc/oRemSlash;
#X obj 419 223 pd-osc/oAddSlash;
#X obj 419 254 send lieu.path;
#X obj 153 112 list;
#X obj 32 77 t a a a a;
#X obj 151 76 bng 15 250 50 0 empty lieu.reload lieu.reload 17 7 0
10 -262144 -1 -1;
#X obj 51 572 print lieu;
#X obj 28 179 t b b a;
#X obj 13 209 s init;
#X connect 1 0 32 0;
#X connect 2 0 1 0;
#X connect 3 0 6 0;
#X connect 4 0 35 0;
#X connect 5 0 0 0;
#X connect 6 0 5 0;
#X connect 7 0 3 0;
#X connect 8 0 10 0;
#X connect 9 0 21 0;
#X connect 9 1 11 0;
#X connect 10 0 9 0;
#X connect 11 0 10 1;
#X connect 12 0 8 0;
#X connect 12 1 13 0;
#X connect 13 0 10 1;
#X connect 14 0 18 0;
#X connect 14 1 15 1;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 18 0 15 0;
#X connect 18 1 17 1;
#X connect 19 0 34 0;
#X connect 19 1 14 0;
#X connect 20 0 12 0;
#X connect 21 0 19 0;
#X connect 22 0 32 0;
#X connect 23 0 25 0;
#X connect 24 0 29 0;
#X connect 25 0 24 1;
#X connect 26 0 24 0;
#X connect 26 1 23 0;
#X connect 28 0 26 0;
#X connect 29 0 30 0;
#X connect 31 0 4 0;
#X connect 32 0 4 0;
#X connect 32 1 31 1;
#X connect 32 2 3 1;
#X connect 32 3 28 0;
#X connect 33 0 31 0;
#X connect 35 0 36 0;
#X connect 35 1 20 0;
#X connect 35 2 5 0;
#X restore 20 71 pd gestionLieux;
#N canvas 180 407 450 300 soundOutput 0;
#X obj 25 50 catch~ chan1;
#X obj 68 75 catch~ chan2;
#X obj 281 44 loadbang;
#X msg 281 111 \; pd dsp 1;
#X obj 280 75 del 100;
#X obj 118 165 line~;
#X msg 118 137 \$1 50;
#X obj 68 192 *~;
#X obj 23 193 *~;
#X obj 23 222 dac~ 1 2;
#X obj 118 105 r soundOutput.vol;
#X connect 0 0 8 0;
#X connect 1 0 7 0;
#X connect 2 0 4 0;
#X connect 4 0 3 0;
#X connect 5 0 7 1;
#X connect 5 0 8 1;
#X connect 6 0 5 0;
#X connect 7 0 9 1;
#X connect 8 0 9 0;
#X connect 10 0 6 0;
#X restore 21 244 pd soundOutput;
#N canvas -3 41 606 349 gui 1;
#X obj 24 28 bng 15 250 50 0 lieu.open empty lieu.open 17 7 0 10 -262144
-1 -1;
#X obj 24 49 bng 15 250 50 0 lieu.reload empty lieu.reload 17 7 0 10
-262144 -1 -1;
#X obj 23 86 bng 15 250 50 0 ambiance.normal empty ambiance.normal
17 7 0 10 -262144 -1 -1;
#X obj 23 107 bng 15 250 50 0 ambiance.fadeout empty ambiance.fadeout
17 7 0 10 -262144 -1 -1;
#X obj 23 128 bng 15 250 50 0 ambiance.cut empty ambiance.cut 17 7
0 10 -262144 -1 -1;
#X obj 22 194 bng 15 250 50 0 circonstance.shuffle empty circonstance.shuffle
17 7 0 10 -262144 -1 -1;
#X obj 222 84 var ambiance.normal.vol;
#X floatatom 370 85 5 0 0 0 - - -, f 5;
#X floatatom 370 105 5 0 0 0 - - -, f 5;
#X floatatom 369 169 5 0 0 0 - - -, f 5;
#X floatatom 369 189 5 0 0 0 - - -, f 5;
#X floatatom 371 126 5 0 0 0 - - -, f 5;
#X floatatom 371 146 5 0 0 0 - - -, f 5;
#X obj 23 216 bng 15 250 50 0 circonstance.play empty circonstance.play
17 7 0 10 -262144 -1 -1;
#X obj 343 253 bng 15 250 50 0 state.circonstance.enter empty state.circonstance.enter
17 7 0 10 -262144 -1 -1;
#X obj 192 104 var ambiance.normal.fadetime;
#X obj 239 169 var ambiance.cut.vol;
#X obj 207 188 var ambiance.cut.fadetime;
#X obj 213 125 var ambiance.fadeout.vol;
#X obj 183 147 var ambiance.fadeout.fadetime;
#X obj 464 158 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 466 191 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 466 129 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 490 129 s ecoute.state;
#X obj 488 158 s ecoute.new;
#X obj 490 191 s ecoute.old;
#X obj 201 47 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 222 46 send ecoute.senseur.raw;
#X connect 6 1 7 0;
#X connect 7 0 6 1;
#X connect 8 0 15 1;
#X connect 9 0 16 1;
#X connect 10 0 17 1;
#X connect 11 0 18 1;
#X connect 12 0 19 1;
#X connect 15 1 8 0;
#X connect 16 1 9 0;
#X connect 17 1 10 0;
#X connect 18 1 11 0;
#X connect 19 1 12 0;
#X connect 20 0 24 0;
#X connect 21 0 25 0;
#X connect 22 0 23 0;
#X connect 26 0 27 0;
#X restore 20 26 pd gui;
#N canvas 322 403 450 300 init 0;
#X obj 42 20 r init;
#X obj 42 48 t b;
#X msg 42 76 \; ambiance.normal bang \; circonstance.shuffle bang;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 19 91 pd init;
#N canvas 209 128 734 555 ambiance 0;
#X obj 41 519 throw~ chan1;
#X obj 69 494 throw~ chan2;
#X obj 43 317 readsf~ 2;
#X obj 43 187 list;
#X obj 43 161 t b a;
#X obj 118 289 t b;
#X obj 43 229 list trim;
#X obj 43 208 list prepend open;
#X obj 40 15 r ambiance.open;
#X obj 119 437 line~;
#X obj 69 464 *~;
#X obj 41 465 *~;
#X text 124 344 init;
#X text 615 231 FromCirconstance;
#X text 538 83 toCirconstance;
#X obj 41 134 pd-osc/oPrepend;
#X obj 234 121 pack;
#X text 541 114 ambiance.a2c.line;
#X obj 234 68 f;
#X obj 234 46 bng 15 250 50 0 empty ambiance.normal ambiance.normal
17 7 0 10 -262144 -1 -1;
#X obj 44 255 t b a;
#X obj 56 41 r lieu.path;
#X obj 57 107 pd-osc/oPrepend;
#X obj 56 65 t b a;
#X msg 56 86 am/;
#X msg 44 283 1;
#X obj 232 243 pack;
#X obj 232 186 f;
#X obj 232 164 bng 15 250 50 0 empty ambiance.fadeout ambiance.fadeout
17 7 0 10 -262144 -1 -1;
#X obj 259 187 r ambiance.fadeout.vol;
#X obj 264 68 r ambiance.normal.vol;
#X obj 255 98 r ambiance.normal.fadetime;
#X obj 253 216 r ambiance.fadeout.fadetime;
#X obj 233 361 pack;
#X obj 233 304 f;
#X obj 233 282 bng 15 250 50 0 empty ambiance.cut ambiance.cut 17 7
0 10 -262144 -1 -1;
#X obj 260 305 r ambiance.cut.vol;
#X obj 254 334 r ambiance.cut.fadetime;
#X connect 2 0 11 0;
#X connect 2 1 10 0;
#X connect 2 2 5 0;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 3 0;
#X connect 6 0 20 0;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 9 0 10 1;
#X connect 9 0 11 1;
#X connect 10 0 1 0;
#X connect 11 0 0 0;
#X connect 15 0 4 0;
#X connect 16 0 9 0;
#X connect 18 0 16 0;
#X connect 19 0 18 0;
#X connect 20 0 25 0;
#X connect 20 1 2 0;
#X connect 21 0 23 0;
#X connect 22 0 15 1;
#X connect 23 0 24 0;
#X connect 23 1 22 1;
#X connect 24 0 22 0;
#X connect 25 0 2 0;
#X connect 26 0 9 0;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 29 0 27 1;
#X connect 30 0 18 1;
#X connect 31 0 16 1;
#X connect 32 0 26 1;
#X connect 33 0 9 0;
#X connect 34 0 33 0;
#X connect 35 0 34 0;
#X connect 36 0 34 1;
#X connect 37 0 33 1;
#X restore 19 121 pd ambiance;
#N canvas 415 174 734 555 circonstance 0;
#X obj 10 679 throw~ chan1;
#X obj 38 654 throw~ chan2;
#X obj 9 486 readsf~ 2;
#X obj 5 287 list;
#X obj 5 261 t b a;
#X obj 80 486 t b;
#X obj 5 329 list trim;
#X obj 5 308 list prepend open;
#X obj 68 594 line~;
#X obj 38 624 *~;
#X obj 10 625 *~;
#X text 446 626 init;
#X obj 70 549 pack;
#X obj 71 526 f;
#X obj 101 526 r circonstance.normal.vol;
#X obj 105 548 r circonstance.normal.fadetime;
#X obj 169 228 combine . extention;
#X obj 209 202 r circonstance.audioextention;
#X obj 170 202 t b a;
#X obj 120 121 list-urn 10;
#X obj 5 4 bng 15 250 50 0 empty circonstance.shuffle circonstance.shuffle
17 7 0 10 -262144 -1 -1;
#X msg 120 98 1;
#X obj 120 169 makefilename _%d;
#X obj 119 228 combine;
#X obj 85 72 r circonstance.filename;
#X obj 54 72 list;
#X obj 55 94 list trim;
#X obj 56 228 combine;
#X obj 197 121 r circonstance.count;
#X obj 16 125 r lieu.path;
#X obj 6 151 list;
#X obj 6 173 list trim;
#X obj 5 27 t b b b;
#X obj 5 228 combine;
#X obj 120 144 + 1;
#X obj 5 195 combine path /ci/;
#X msg 47 456 1;
#X obj 110 487 send circonstance.ended;
#X obj 47 400 r circonstance.play;
#X msg 70 573 0 \, \$1 \$2;
#X obj 46 426 t b b;
#X obj 135 277 print circonstance cue;
#X connect 2 0 10 0;
#X connect 2 1 9 0;
#X connect 2 2 5 0;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 4 1 3 1;
#X connect 5 0 37 0;
#X connect 6 0 2 0;
#X connect 7 0 6 0;
#X connect 8 0 9 1;
#X connect 8 0 10 1;
#X connect 9 0 1 0;
#X connect 10 0 0 0;
#X connect 12 0 39 0;
#X connect 13 0 12 0;
#X connect 14 0 13 1;
#X connect 15 0 12 1;
#X connect 16 0 23 1;
#X connect 17 0 18 0;
#X connect 18 0 16 0;
#X connect 18 1 16 1;
#X connect 19 0 34 0;
#X connect 20 0 32 0;
#X connect 21 0 19 0;
#X connect 22 0 23 0;
#X connect 23 0 27 1;
#X connect 24 0 25 1;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 33 1;
#X connect 28 0 19 1;
#X connect 29 0 30 1;
#X connect 30 0 31 0;
#X connect 31 0 35 0;
#X connect 32 0 30 0;
#X connect 32 1 25 0;
#X connect 32 2 21 0;
#X connect 33 0 4 0;
#X connect 33 0 41 0;
#X connect 34 0 22 0;
#X connect 35 0 33 0;
#X connect 36 0 2 0;
#X connect 38 0 40 0;
#X connect 39 0 8 0;
#X connect 40 0 36 0;
#X connect 40 1 13 0;
#X restore 19 147 pd circonstance;
#N canvas 603 23 385 284 statesMachine 0;
#X text 43 231 temps ecoule avec ecouteur actif;
#N canvas 60 286 450 300 circonstance.ended 0;
#X obj 20 18 r circonstance.ended;
#X obj 56 100 s circonstance.shuffle;
#X obj 41 129 s state.circonstance.exit;
#X obj 83 75 s ambiance.normal;
#X obj 21 50 t b b b b;
#X obj 17 300 print circonstance.state;
#X msg 17 168 waiting;
#X obj 83 168 r circonstance.ecoute.new.delay;
#X obj 96 189 r circonstance.ecoute.old.delay;
#X obj 16 250 list append;
#X obj 17 276 list trim;
#X obj 78 224 list append;
#X obj 193 225 loadbang;
#X msg 160 225 sec;
#X connect 0 0 4 0;
#X connect 4 0 6 0;
#X connect 4 1 2 0;
#X connect 4 2 1 0;
#X connect 4 3 3 0;
#X connect 6 0 9 0;
#X connect 7 0 11 0;
#X connect 8 0 11 0;
#X connect 9 0 10 0;
#X connect 10 0 5 0;
#X connect 11 0 9 1;
#X connect 12 0 13 0;
#X connect 13 0 11 1;
#X restore 54 206 pd circonstance.ended;
#N canvas 103 74 379 396 circonstance.ecoute.new 0;
#X text 24 304 raison pour entrer en circonstance;
#X text 17 321 condition : nouveau ecouteurActif?;
#X text 85 339 1er temps minimum;
#X text 85 355 1er temps etendu;
#X obj 9 50 sel 0 1;
#X obj 57 221 delay;
#X obj 87 196 * 1000;
#X obj 87 122 random;
#X obj 87 171 +;
#X obj 8 14 r ecoute.new;
#X obj 102 144 r ecoute.new.circonstance.minimum;
#X obj 120 44 r ecoute.new.circonstance.maximum;
#X obj 133 71 r ecoute.new.circonstance.minimum;
#X obj 120 97 -;
#X msg 9 146 stop;
#X obj 39 83 t b b;
#X obj 57 247 s circonstance.state.enter;
#X obj 142 196 s circonstance.ecoute.new.delay;
#X connect 4 0 14 0;
#X connect 4 1 15 0;
#X connect 5 0 16 0;
#X connect 6 0 5 1;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 8 0 17 0;
#X connect 9 0 4 0;
#X connect 10 0 8 1;
#X connect 11 0 13 0;
#X connect 12 0 13 1;
#X connect 13 0 7 1;
#X connect 14 0 5 0;
#X connect 15 0 5 0;
#X connect 15 1 7 0;
#X restore 51 110 pd circonstance.ecoute.new;
#N canvas 422 220 450 300 circonstance.ecoute.old 0;
#X obj 11 11 r ecoute.old;
#X obj 10 37 sel 0 1;
#X obj 41 213 delay;
#X obj 71 188 * 1000;
#X obj 71 114 random;
#X obj 71 163 +;
#X obj 104 89 -;
#X obj 40 77 t b b;
#X obj 104 36 r ecoute.old.circonstance.maximum;
#X obj 117 63 r ecoute.old.circonstance.minimum;
#X obj 86 136 r ecoute.old.circonstance.minimum;
#X msg 11 163 stop;
#X obj 41 239 s circonstance.state.enter;
#X obj 117 188 s circonstance.ecoute.old.delay;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 1 1 7 0;
#X connect 2 0 12 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 5 0 13 0;
#X connect 6 0 4 1;
#X connect 7 0 2 0;
#X connect 7 1 4 0;
#X connect 8 0 6 0;
#X connect 9 0 6 1;
#X connect 10 0 5 1;
#X connect 11 0 2 0;
#X restore 52 132 pd circonstance.ecoute.old;
#N canvas 647 28 469 415 get.ecoute.actif 0;
#X text 324 38 ecouteur;
#X obj 7 33 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 6 209 delay;
#X obj 31 163 r ecoute.inactif.timer;
#X obj 31 186 * 1000;
#X obj 6 54 sel 0 1;
#X msg 19 135 stop;
#X obj 7 6 r ecoute.senseur.raw;
#X obj 234 180 * 1000;
#X obj 234 160 r ecoute.actif.timer;
#X obj 7 79 t b b;
#X obj 206 203 delay;
#X obj 178 81 t b b;
#X msg 167 132 stop;
#X obj 118 387 s ecoute.actif;
#X obj 206 227 t b;
#X msg 206 252 1;
#X obj 7 242 t b;
#X msg 7 265 0;
#X connect 1 0 5 0;
#X connect 2 0 17 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 5 0 10 0;
#X connect 5 1 12 0;
#X connect 6 0 2 0;
#X connect 7 0 1 0;
#X connect 8 0 11 1;
#X connect 9 0 8 0;
#X connect 10 0 2 0;
#X connect 10 1 13 0;
#X connect 11 0 15 0;
#X connect 12 0 6 0;
#X connect 12 1 11 0;
#X connect 13 0 11 0;
#X connect 15 0 16 0;
#X connect 16 0 14 0;
#X connect 17 0 18 0;
#X connect 18 0 14 0;
#X restore 24 23 pd get.ecoute.actif;
#N canvas 627 330 448 395 circonstance.state.enter 0;
#X obj 50 69 s circonstance.play;
#X obj 30 91 s ambiance.cut;
#X obj 11 46 t b b b;
#X obj 11 20 r circonstance.state.enter;
#X msg 13 137 playing;
#X obj 13 166 print circonstance.state;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 2 2 0 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X restore 38 185 pd circonstance.state.enter;
#N canvas 866 100 450 300 ciconstance.state 0;
#X obj 20 39 r ecoute.actif;
#X obj 20 67 sel 0 1;
#X msg 76 123 \; ecoute.new 1;
#X obj 19 172 send ecoute.old.enable;
#X msg 19 99 0;
#X obj 49 99 t b b;
#X msg 49 121 1;
#X obj 253 96 r ecoute.actif;
#X obj 231 69 r ecoute.old.enable;
#X obj 198 48 r circonstance.ended;
#X obj 199 98 spigot;
#X obj 199 127 spigot;
#X msg 199 149 1;
#X obj 253 124 sel 0;
#X msg 253 147 0;
#X obj 198 177 s ecoute.old;
#X text 22 16 NEW;
#X text 198 17 OLD;
#X obj 6 232 print circonstance.state;
#X msg 6 205 ended;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 5 0;
#X connect 4 0 3 0;
#X connect 4 0 19 0;
#X connect 5 0 6 0;
#X connect 5 1 2 0;
#X connect 6 0 3 0;
#X connect 7 0 13 0;
#X connect 7 0 11 1;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 15 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 19 0 18 0;
#X restore 28 85 pd ciconstance.state;
#N canvas 743 135 565 437 ambiance.state.fadeout 0;
#X obj 30 32 r ecoute.actif;
#X msg 42 148 stop;
#X obj 257 193 * 1000;
#X obj 30 92 t b b;
#X obj 229 216 delay;
#X obj 201 94 t b b;
#X msg 190 145 stop;
#X obj 229 240 t b;
#X obj 30 250 t b;
#X obj 257 173 r ambiance.inactif.timer;
#X obj 29 67 sel 1 0;
#X obj 29 222 del 1;
#X obj 230 273 s ambiance.fadeout;
#X obj 29 358 s ambiance.normal;
#X obj 151 340 print ambiance.state;
#X msg 196 308 fading out;
#X msg 99 305 normal;
#X connect 0 0 10 0;
#X connect 1 0 11 0;
#X connect 2 0 4 1;
#X connect 3 0 11 0;
#X connect 3 1 6 0;
#X connect 4 0 7 0;
#X connect 5 0 1 0;
#X connect 5 1 4 0;
#X connect 6 0 4 0;
#X connect 7 0 12 0;
#X connect 7 0 15 0;
#X connect 8 0 13 0;
#X connect 8 0 16 0;
#X connect 9 0 2 0;
#X connect 10 0 3 0;
#X connect 10 1 5 0;
#X connect 11 0 8 0;
#X connect 15 0 14 0;
#X connect 16 0 14 0;
#X restore 28 54 pd ambiance.state.fadeout;
#X restore 20 50 pd statesMachine;
#N canvas 44 110 652 375 keyboard 0;
#X obj 136 53 key;
#X obj 17 219 print;
#X text 111 29 Utiliser CapLock pour activer le simulateur;
#X obj 17 112 spigot;
#X obj 63 113 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 294 105 text define keyMap;
#X msg 296 72 write keyMap.txt;
#X msg 409 73 read keyMap.txt;
#X obj 407 49 loadbang;
#X obj 136 87 text search keyMap;
#X obj 137 146 text get keyMap -1;
#X obj 137 183 route bang;
#X obj 473 222 print LLL;
#X obj 137 213 list split 1;
#X obj 177 341 send;
#X obj 180 253 list split 1;
#X obj 176 314 list;
#X obj 184 288 t b l;
#X connect 0 0 3 0;
#X connect 0 0 9 0;
#X connect 3 0 1 0;
#X connect 4 0 3 1;
#X connect 6 0 5 0;
#X connect 7 0 5 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 1 13 0;
#X connect 13 1 12 0;
#X connect 13 1 15 0;
#X connect 15 0 17 0;
#X connect 15 1 16 1;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 17 1 14 1;
#X restore 20 191 pd keyboard;
#X text 14 6 poste ecoute;
