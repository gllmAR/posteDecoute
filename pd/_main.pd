#N canvas 796 333 541 398 10;
#X declare -path abs/;
#X declare -path pd-osc/;
#X text 45 77 ecouteur;
#X text 48 100 detecte;
#X msg 39 45 AMBIANCE.VEILLE;
#X obj 381 186 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 38 185 ambiance.veille.timer;
#X text 32 209 circonstance.new.timer;
#X text 61 251 circonstance.flag;
#X obj 188 186 var ambiance.veille.timer.ended;
#X obj 185 121 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 102 98 var detecte;
#X obj 181 99 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 182 78 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 102 77 var ecouteur;
#X obj 179 208 var circonstance.new.timer.ended;
#X obj 382 209 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 247 249 var circonstance.flag;
#X obj 384 249 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 32 230 circonstance.old.timer;
#X obj 383 230 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 182 229 var circonstance.old.timer.ended;
#X obj 383 315 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 33 315 synchronie.timer.ended;
#X obj 215 314 var synchronie.timer.ended;
#X obj 383 270 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 38 270 detection.timer.ended;
#X obj 221 268 var detection.timer.ended;
#X text 37 121 synchrone;
#X obj 101 121 var synchrone;
#N canvas 187 36 1102 542 print 0;
#X obj 277 55 r detection.play;
#X obj 138 7 r synchronie.play;
#X msg 139 50 SYNCHRONIE play;
#X msg 274 98 DETECTION play;
#X obj 23 43 r state;
#X obj 50 72 print state;
#X msg 424 107 AMBIANCE.VEILLE fading out;
#X obj 32 222 outlet;
#X obj 27 183 list trim;
#X obj 26 150 list prepend set;
#X obj 264 322 list trim;
#X obj 263 289 list prepend set;
#X obj 226 204 t a a;
#X obj 280 351 outlet;
#X obj 599 57 r ambiance.veille.timer.time;
#X msg 598 85 ambiance.veille.timer.time \$1;
#X obj 425 65 r ambiance.fadeout;
#X obj 393 305 r circonstance.new.timer.time;
#X obj 439 363 r circonstance.old.timer.time;
#X obj 447 428 r ambiance.timer.time;
#X obj 478 514 r detection.timer.time;
#X msg 392 332 circonstance.new.timer.time \$1;
#X obj 387 566 print timer;
#X msg 417 395 circonstance.old.timer.time \$1;
#X msg 450 458 ambiance.timer.time \$1;
#X msg 475 540 detection.timer.time \$1;
#X obj 661 147 r ambiance.cue;
#X obj 708 250 r synchronie.cue;
#X obj 689 424 print cue;
#X obj 680 197 r circonstance.cue;
#X obj 716 332 r detection.cue;
#X obj 142 81 list append;
#X obj 249 23 r synchronie.cue;
#X obj 141 103 list trim;
#X obj 266 121 list append;
#X obj 265 143 list trim;
#X obj 413 27 r detection.cue;
#X obj 258 230 print play;
#X obj 456 189 print event;
#X msg 704 295 SYNCHRONIE cue : \$1;
#X msg 715 367 DETECTION cue : \$1;
#X msg 682 220 CIRCONSTANCE cue : \$1;
#X msg 663 168 AMBIANCE cue : \$1;
#X obj 138 29 t b;
#X obj 277 77 t b;
#X obj 446 88 t b;
#X connect 0 0 44 0;
#X connect 1 0 43 0;
#X connect 2 0 31 0;
#X connect 3 0 34 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 6 0 38 0;
#X connect 6 0 11 0;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 11 0;
#X connect 12 1 37 0;
#X connect 14 0 15 0;
#X connect 15 0 38 0;
#X connect 15 0 11 0;
#X connect 16 0 45 0;
#X connect 17 0 21 0;
#X connect 18 0 23 0;
#X connect 19 0 24 0;
#X connect 20 0 25 0;
#X connect 21 0 22 0;
#X connect 23 0 22 0;
#X connect 24 0 22 0;
#X connect 25 0 22 0;
#X connect 26 0 42 0;
#X connect 27 0 39 0;
#X connect 29 0 41 0;
#X connect 30 0 40 0;
#X connect 31 0 33 0;
#X connect 32 0 31 1;
#X connect 33 0 12 0;
#X connect 34 0 35 0;
#X connect 35 0 12 0;
#X connect 36 0 34 1;
#X connect 39 0 28 0;
#X connect 40 0 28 0;
#X connect 41 0 28 0;
#X connect 42 0 28 0;
#X connect 43 0 2 0;
#X connect 44 0 3 0;
#X connect 45 0 6 0;
#X restore 22 15 pd print;
#X obj 383 291 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 32 291 detection.player.ended;
#X obj 384 340 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 33 340 synchronie.timer.ended;
#X obj 23 46 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 278 100 bng 15 250 50 0 lieu.open empty lieu.open 17 7 0 10
-262144 -1 -1;
#X obj 279 120 bng 15 250 50 0 lieu.reload empty lieu.reload 17 7 0
10 -262144 -1 -1;
#X obj 251 290 var detection.ended;
#X obj 255 338 var synchronie.ended;
#N canvas 38 146 653 596 posteEcoute 1;
#N canvas 0 22 455 419 AMBIANCE.VEILLE->AMBIANCE.ACTIF 0;
#X obj 15 136 spigot;
#X obj 15 33 r ecouteur;
#X obj 15 57 sel 1;
#X msg 64 250 \; state AMBIANCE.ACTIF;
#X obj 48 84 p.statedelay AMBIANCE.VEILLE;
#X msg 28 335 \; circonstance.new.timer 1;
#X msg 42 299 \; circonstance.flag 0;
#X text 12 6 AMBIANCE.VEILLE->AMBIANCE.ACTIF;
#X msg 73 212 \; ambiance.veille.timer 0;
#X connect 0 0 3 0;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 4 0 0 1;
#X restore 316 200 pd AMBIANCE.VEILLE->AMBIANCE.ACTIF;
#N canvas 0 23 450 300 AMBIANCE.ACTIF->AMBIANCE.VEILLE 0;
#X msg 28 302 \; state AMBIANCE.VEILLE;
#X obj 67 193 t b a;
#X obj 28 249 list.sum;
#X obj 28 275 sel 2;
#X obj 31 69 == 0;
#X obj 29 227 pack f f;
#X obj 67 167 p.statedelay AMBIANCE.ACTIF;
#X obj 31 39 r ecouteur;
#X text 34 7 AMBIANCE.ACTIF->AMBIANCE.VEILLE;
#X connect 1 0 5 0;
#X connect 1 1 5 1;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 7 0 4 0;
#X restore 315 242 pd AMBIANCE.ACTIF->AMBIANCE.VEILLE;
#N canvas 523 25 344 412 AMBIANCE.ACTIF->CIRCONSTANCE.NEW 0;
#X text 20 14 AMBIANCE.ACTIF->CIRCONSTANCE.NEW;
#X obj 15 49 r ecouteur;
#X obj 14 167 == 1;
#X obj 83 167 == 0;
#X obj 15 252 list.sum;
#X obj 45 191 t b a;
#X obj 83 97 r circonstance.flag;
#X obj 83 191 t b a;
#X obj 121 190 t b a;
#X obj 46 71 r circonstance.new.timer.ended;
#X msg 15 304 \; state CIRCONSTANCE.NEW;
#X floatatom 89 282 5 0 0 0 - - -, f 5;
#X obj 45 167 == 1;
#X obj 15 279 sel 4;
#X obj 16 221 pack f f f f;
#X obj 122 123 p.statedelay AMBIANCE.ACTIF;
#X connect 1 0 2 0;
#X connect 2 0 14 0;
#X connect 3 0 7 0;
#X connect 4 0 11 0;
#X connect 4 0 13 0;
#X connect 5 0 14 0;
#X connect 5 1 14 1;
#X connect 6 0 3 0;
#X connect 7 0 14 0;
#X connect 7 1 14 2;
#X connect 8 0 14 0;
#X connect 8 1 14 3;
#X connect 9 0 12 0;
#X connect 12 0 5 0;
#X connect 13 0 10 0;
#X connect 14 0 4 0;
#X connect 15 0 8 0;
#X restore 316 262 pd AMBIANCE.ACTIF->CIRCONSTANCE.NEW;
#N canvas 0 22 372 397 AMBIANCE.ACTIF->CIRCONSTANCE.OLD 0;
#X obj 22 12 r ecouteur;
#X obj 18 119 == 1;
#X obj 15 200 list.sum;
#X obj 49 145 t b a;
#X obj 105 63 r circonstance.flag;
#X obj 86 147 t b a;
#X obj 15 227 sel 4;
#X obj 123 149 t b a;
#X obj 55 40 r circonstance.old.timer.ended;
#X obj 89 120 == 1;
#X msg 15 252 \; state CIRCONSTANCE.OLD;
#X floatatom 71 232 5 0 0 0 - - -, f 5;
#X obj 51 120 == 1;
#X obj 16 178 pack f f f f;
#X obj 139 87 p.statedelay AMBIANCE.ACTIF;
#X connect 0 0 1 0;
#X connect 1 0 13 0;
#X connect 2 0 6 0;
#X connect 2 0 11 0;
#X connect 3 0 13 0;
#X connect 3 1 13 1;
#X connect 4 0 9 0;
#X connect 5 0 13 0;
#X connect 5 1 13 2;
#X connect 6 0 10 0;
#X connect 7 0 13 0;
#X connect 7 1 13 3;
#X connect 8 0 12 0;
#X connect 9 0 5 0;
#X connect 12 0 3 0;
#X connect 13 0 2 0;
#X connect 14 0 7 0;
#X restore 316 284 pd AMBIANCE.ACTIF->CIRCONSTANCE.OLD;
#N canvas 855 73 433 341 AMBIANCE.ACTIF->DETECTION 0;
#X obj 17 12 r ecouteur;
#X obj 16 106 == 1;
#X obj 57 192 list.sum;
#X obj 45 125 t b a;
#X obj 81 125 t b a;
#X obj 156 128 t b a;
#X obj 81 107 == 1;
#X floatatom 113 218 5 0 0 0 - - -, f 5;
#X obj 46 106 == 1;
#X obj 81 49 r detection.timer.ended;
#X obj 47 30 r detecte;
#X msg 57 244 \; DETECTION bang;
#X obj 157 88 p.statedelay AMBIANCE.ACTIF;
#X obj 57 165 pack f f f f f;
#X obj 120 127 t b a;
#X obj 120 106 == 1;
#X obj 57 219 sel 5;
#X obj 120 69 r detection.ended;
#X connect 0 0 1 0;
#X connect 1 0 13 0;
#X connect 2 0 7 0;
#X connect 2 0 16 0;
#X connect 3 0 13 0;
#X connect 3 1 13 1;
#X connect 4 0 13 0;
#X connect 4 1 13 2;
#X connect 5 0 13 0;
#X connect 5 1 13 4;
#X connect 6 0 4 0;
#X connect 8 0 3 0;
#X connect 9 0 6 0;
#X connect 10 0 8 0;
#X connect 12 0 5 0;
#X connect 13 0 2 0;
#X connect 14 0 13 0;
#X connect 14 1 13 3;
#X connect 15 0 14 0;
#X connect 16 0 11 0;
#X connect 17 0 15 0;
#X restore 364 305 pd AMBIANCE.ACTIF->DETECTION;
#N canvas 925 248 361 355 CIRCONSTANCE.NEW->AMBIANCE.ACTIF(VEILLE)
0;
#X obj 31 12 r ecouteur;
#X obj 30 172 list.sum;
#X obj 30 198 sel 2;
#X obj 31 42 == 0;
#X obj 11 241 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 31 150 pack f f;
#X obj 31 221 del 10;
#X obj 61 113 t b a;
#X obj 61 79 p.statedelay CIRCONSTANCE.NEW 10;
#X obj 33 249 t b b;
#X msg 52 277 \; circonstance.fadeout bang;
#X msg 31 314 \; state AMBIANCE.VEILLE;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 0 6 0;
#X connect 3 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 9 0;
#X connect 7 0 5 0;
#X connect 7 1 5 1;
#X connect 8 0 7 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X restore 311 383 pd CIRCONSTANCE.NEW->AMBIANCE.ACTIF(VEILLE);
#N canvas 0 22 341 351 CIRCONSTANCE.NEW->AMBIANCE.ACTIF(FLAG) 0;
#X obj 22 17 r ecouteur;
#X obj 22 98 == 1;
#X obj 29 157 list.sum;
#X obj 55 99 t b a;
#X obj 94 100 t b a;
#X floatatom 103 187 5 0 0 0 - - -, f 5;
#X obj 56 78 == 1;
#X obj 57 39 r circonstance.new.player.ended;
#X obj 30 126 pack f f f;
#X obj 29 184 sel 3;
#X msg 48 225 \; state AMBIANCE.ACTIF;
#X msg 26 265 \; circonstance.flag 1;
#X obj 96 66 p.statedelay CIRCONSTANCE.NEW;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 2 0 5 0;
#X connect 2 0 9 0;
#X connect 3 0 8 0;
#X connect 3 1 8 1;
#X connect 4 0 8 0;
#X connect 4 1 8 2;
#X connect 6 0 3 0;
#X connect 7 0 6 0;
#X connect 8 0 2 0;
#X connect 9 0 10 0;
#X connect 9 0 11 0;
#X connect 12 0 4 0;
#X restore 310 406 pd CIRCONSTANCE.NEW->AMBIANCE.ACTIF(FLAG);
#N canvas 0 22 449 423 CIRCONSTANCE.OLD->AMBIANCE.ACTIF(VEILLE) 0;
#X obj 34 14 r ecouteur;
#X obj 32 153 list.sum;
#X obj 32 179 sel 2;
#X obj 34 44 == 0;
#X obj 13 222 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 33 131 pack f f;
#X obj 33 202 del 10;
#X msg 24 323 \; circonstance.flag 0;
#X obj 44 96 t b a;
#X obj 48 69 p.statedelay CIRCONSTANCE.OLD;
#X msg 176 254 \; circonstance.fadeout bang;
#X msg 45 286 \; state AMBIANCE.VEILLE;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 0 6 0;
#X connect 3 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 11 0;
#X connect 6 0 7 0;
#X connect 6 0 10 0;
#X connect 8 0 5 0;
#X connect 8 1 5 1;
#X connect 9 0 8 0;
#X restore 308 472 pd CIRCONSTANCE.OLD->AMBIANCE.ACTIF(VEILLE);
#N canvas 0 22 377 406 CIRCONSTANCE.OLD->AMBIANCE.ACTIF(flag) 0;
#X obj 23 24 r ecouteur;
#X obj 23 89 == 1;
#X obj 22 176 list.sum;
#X obj 55 119 t b a;
#X obj 94 119 t b a;
#X floatatom 96 206 5 0 0 0 - - -, f 5;
#X obj 55 90 == 1;
#X obj 23 145 pack f f f;
#X obj 22 203 sel 3;
#X msg 44 246 \; state AMBIANCE.ACTIF;
#X msg 22 286 \; circonstance.flag 1;
#X obj 55 46 r circonstance.old.player.ended;
#X obj 98 72 p.statedelay CIRCONSTANCE.OLD;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 2 0 5 0;
#X connect 2 0 8 0;
#X connect 3 0 7 0;
#X connect 3 1 7 1;
#X connect 4 0 7 0;
#X connect 4 1 7 2;
#X connect 6 0 3 0;
#X connect 7 0 2 0;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 11 0 6 0;
#X connect 12 0 4 0;
#X restore 307 494 pd CIRCONSTANCE.OLD->AMBIANCE.ACTIF(flag);
#X obj 314 48 declare -path abs/;
#N canvas 555 82 402 372 state-AMBIANCE.VEILLE 0;
#X obj 18 6 p.statedelay AMBIANCE.VEILLE;
#X obj 18 55 sel 1;
#X msg 18 80 \; ambiance.veille.timer 1;
#X obj 15 183 r ambiance.veille.timer.ended;
#X obj 17 122 p.timer ambiance.veille;
#X obj 16 251 t b b b;
#X obj 15 205 change;
#X obj 16 228 sel 1;
#X obj 17 281 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 54 281 \; ambiance.fadeout bang;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 6 0;
#X connect 5 0 8 0;
#X connect 5 2 9 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X restore 56 206 pd state-AMBIANCE.VEILLE;
#N canvas 0 22 515 679 state-CIRCONSTANCE.NEW 0;
#X obj 101 145 r circonstance.new.play;
#X msg 31 534 \; circonstance.flag 1;
#X obj 30 337 r circonstance.new.ended;
#X obj 30 312 s circonstance.new.ended;
#X msg 30 64 \; circonstance.new.play 1;
#X obj 30 39 sel 1;
#X obj 30 16 p.statedelay CIRCONSTANCE.NEW;
#X msg 48 486 \; circonstance.old.timer 1;
#X msg 83 408 \; state AMBIANCE.ACTIF;
#X obj 61 288 spigot;
#X msg 94 241 1;
#X obj 35 118 r circonstance.ended;
#X obj 35 158 t b b;
#X msg 33 211 0;
#X msg 248 201 \; circonstance.shuffle bang;
#X msg 246 236 \; circonstance.play bang;
#X obj 101 169 t b b b b;
#X msg 242 305 \; ambiance.cut bang;
#X obj 32 375 t b b b b;
#X msg 247 270 \; circonstance.normal bang;
#X obj 108 372 p.timer circonstance.new;
#X connect 0 0 16 0;
#X connect 2 0 18 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 9 0 3 0;
#X connect 10 0 9 1;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 9 0;
#X connect 13 0 9 1;
#X connect 16 0 10 0;
#X connect 16 1 17 0;
#X connect 16 2 15 0;
#X connect 16 2 19 0;
#X connect 16 3 14 0;
#X connect 18 0 1 0;
#X connect 18 1 7 0;
#X connect 18 3 8 0;
#X restore 55 254 pd state-CIRCONSTANCE.NEW;
#N canvas 361 70 530 580 state-CIRCONSTANCE.OLD 0;
#X msg 28 536 \; circonstance.flag 1;
#X obj 29 33 sel 1;
#X obj 27 407 t b b b;
#X msg 45 488 \; circonstance.old.timer 1;
#X msg 66 442 \; state AMBIANCE.ACTIF;
#X obj 29 12 p.statedelay CIRCONSTANCE.OLD;
#X msg 29 53 \; circonstance.old.play 1;
#X obj 27 371 r circonstance.old.ended;
#X obj 62 303 s circonstance.old.ended;
#X obj 62 276 spigot;
#X msg 95 229 1;
#X obj 36 106 r circonstance.ended;
#X obj 36 146 t b b;
#X msg 34 199 0;
#X obj 102 151 r circonstance.old.play;
#X msg 262 190 \; circonstance.shuffle bang;
#X msg 260 225 \; circonstance.play bang;
#X msg 256 294 \; ambiance.cut bang;
#X msg 261 259 \; circonstance.normal bang;
#X obj 102 175 t b b b b b;
#X obj 83 405 p.timer circonstance.old;
#X connect 1 0 6 0;
#X connect 2 0 0 0;
#X connect 2 1 3 0;
#X connect 2 2 4 0;
#X connect 5 0 1 0;
#X connect 7 0 2 0;
#X connect 9 0 8 0;
#X connect 10 0 9 1;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 9 0;
#X connect 13 0 9 1;
#X connect 14 0 19 0;
#X connect 19 0 10 0;
#X connect 19 1 17 0;
#X connect 19 2 18 0;
#X connect 19 3 16 0;
#X connect 19 4 15 0;
#X restore 54 275 pd state-CIRCONSTANCE.OLD;
#X text 282 178 STATE MACHINE;
#X text 7 186 STATEs;
#N canvas 380 102 636 710 gestionLieux 0;
#X obj 71 301 text define lieu;
#X obj 31 50 openpanel;
#X obj 31 16 bng 15 250 50 0 empty lieu.open lieu.open 17 7 0 10 -262144
-1 -1;
#X obj 259 115 list;
#X obj 32 141 list prepend read;
#X obj 67 209 list trim;
#X obj 259 148 list prepend write;
#X obj 259 82 bng 15 250 50 0 empty lieu.save lieu.save 17 7 0 10 -262144
-1 -1;
#X obj 50 380 until;
#X obj 50 412 f;
#X obj 97 438 + 1;
#X msg 91 380 0;
#X obj 89 513 list split 1;
#X obj 90 554 list;
#X obj 90 575 list trim;
#X obj 130 601 send;
#X obj 125 536 t b a;
#X obj 62 492 t a a;
#X obj 50 329 text size lieu;
#X obj 62 469 text get lieu;
#X obj 95 50 r lieu.read;
#X obj 446 149 list length;
#X obj 419 196 list split;
#X obj 446 170 - 1;
#X obj 419 124 t a a;
#X text 420 71 PAS DE CARACTERE SPECIAL NI ESPACE;
#X obj 419 101 pd-osc/oRemSlash;
#X obj 419 223 pd-osc/oAddSlash;
#X obj 419 254 send lieu.path;
#X obj 150 111 list;
#X obj 32 77 t a a a a;
#X obj 151 76 bng 15 250 50 0 empty lieu.reload lieu.reload 17 7 0
10 -262144 -1 -1;
#X obj 28 179 t b b a;
#X obj 7 495 >=;
#X obj 30 355 t f f b;
#X obj 35 437 t f f f;
#X obj 8 524 sel 1;
#X obj 7 462 + 1;
#X obj 58 607 list trim;
#X obj 58 628 print parsing;
#N canvas 481 71 324 473 init 0;
#X obj 19 69 text size init;
#X obj 20 45 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 19 189 f;
#X obj 52 190 + 1;
#X obj 19 255 text get init;
#X obj 19 282 list split 1;
#X obj 22 355 list;
#X obj 22 381 list trim;
#X obj 82 423 send;
#X obj 20 11 r init;
#X obj 70 12 inlet;
#X msg -39 130 1;
#X obj -33 188 t b;
#X obj -19 224 >=;
#X obj 22 217 t a a;
#X obj -31 268 sel 1;
#X msg -45 303 0;
#X obj 168 478 print parsing init;
#X obj 22 317 t b a;
#X obj 167 445 list trim;
#X obj 169 421 list prepend;
#X msg 142 66 28;
#X msg 63 147 0;
#X obj -23 93 t b b b a;
#X obj -56 155 metro 5;
#X connect 0 0 23 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 0 14 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 4 0 20 0;
#X connect 5 0 18 0;
#X connect 5 1 6 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 24 0;
#X connect 12 0 2 0;
#X connect 13 0 15 0;
#X connect 14 0 13 0;
#X connect 14 1 4 0;
#X connect 15 0 16 0;
#X connect 16 0 24 0;
#X connect 18 0 6 0;
#X connect 18 1 8 1;
#X connect 19 0 17 0;
#X connect 20 0 19 0;
#X connect 21 0 23 0;
#X connect 22 0 2 1;
#X connect 23 1 11 0;
#X connect 23 2 22 0;
#X connect 23 3 13 1;
#X connect 24 0 12 0;
#X restore 8 573 pd init;
#X obj 158 132 route symbol;
#X obj 158 158 list trim;
#X obj 99 252 list trim;
#X obj 158 196 print reload file;
#X obj 99 274 print load file;
#X obj 72 229 t a a;
#X obj 8 548 t b;
#X obj 15 278 del 100;
#X connect 1 0 30 0;
#X connect 2 0 1 0;
#X connect 3 0 6 0;
#X connect 4 0 32 0;
#X connect 5 0 46 0;
#X connect 6 0 5 0;
#X connect 7 0 3 0;
#X connect 8 0 9 0;
#X connect 9 0 35 0;
#X connect 10 0 9 1;
#X connect 11 0 9 1;
#X connect 12 0 16 0;
#X connect 12 1 13 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 16 0 13 0;
#X connect 16 1 15 1;
#X connect 17 0 38 0;
#X connect 17 1 12 0;
#X connect 18 0 34 0;
#X connect 19 0 17 0;
#X connect 20 0 30 0;
#X connect 21 0 23 0;
#X connect 22 0 27 0;
#X connect 23 0 22 1;
#X connect 24 0 22 0;
#X connect 24 1 21 0;
#X connect 26 0 24 0;
#X connect 27 0 28 0;
#X connect 29 0 4 0;
#X connect 29 0 41 0;
#X connect 30 0 4 0;
#X connect 30 1 29 1;
#X connect 30 2 3 1;
#X connect 30 3 26 0;
#X connect 31 0 29 0;
#X connect 32 1 48 0;
#X connect 32 2 5 0;
#X connect 33 0 36 0;
#X connect 34 0 33 1;
#X connect 34 1 8 0;
#X connect 34 2 11 0;
#X connect 35 0 37 0;
#X connect 35 1 19 0;
#X connect 35 2 10 0;
#X connect 36 0 47 0;
#X connect 37 0 33 0;
#X connect 38 0 39 0;
#X connect 41 0 42 0;
#X connect 42 0 44 0;
#X connect 43 0 45 0;
#X connect 46 0 0 0;
#X connect 46 1 43 0;
#X connect 47 0 40 0;
#X connect 48 0 18 0;
#X restore 311 131 pd gestionLieux;
#N canvas 584 157 469 415 get.ecoute.actif 0;
#X text 344 82 ecouteur;
#X obj 27 77 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0 1
;
#X obj 26 253 delay;
#X obj 26 98 sel 0 1;
#X msg 39 179 stop;
#X obj 27 123 t b b;
#X obj 226 247 delay;
#X obj 198 125 t b b;
#X msg 187 176 stop;
#X obj 226 271 t b;
#X msg 226 296 1;
#X obj 27 286 t b;
#X msg 27 309 0;
#X obj 27 49 change;
#X obj 27 354 s ecouteur;
#X obj 51 207 r ecouteur.inactif.timer;
#X obj 254 204 r ecouteur.actif.timer;
#X obj 27 25 r ecouteur.raw;
#X connect 1 0 3 0;
#X connect 2 0 11 0;
#X connect 3 0 5 0;
#X connect 3 1 7 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 5 1 8 0;
#X connect 6 0 9 0;
#X connect 7 0 4 0;
#X connect 7 1 6 0;
#X connect 8 0 6 0;
#X connect 9 0 10 0;
#X connect 10 0 14 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 13 0 1 0;
#X connect 15 0 2 1;
#X connect 16 0 6 1;
#X connect 17 0 13 0;
#X restore 57 118 pd get.ecoute.actif;
#N canvas 830 230 469 415 get.detect.actif 0;
#X text 344 82 ecouteur;
#X obj 26 112 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 25 288 delay;
#X obj 25 133 sel 0 1;
#X msg 38 214 stop;
#X obj 26 158 t b b;
#X obj 225 282 delay;
#X obj 197 160 t b b;
#X msg 186 211 stop;
#X obj 225 306 t b;
#X msg 225 331 1;
#X obj 26 321 t b;
#X msg 26 344 0;
#X obj 27 31 change;
#X obj 50 242 r detecte.inactif.timer;
#X obj 253 239 r detecte.actif.timer;
#X obj 27 7 r detecte.raw;
#X obj 26 92 -;
#X obj 25 67 swap 1;
#X obj 26 389 s detecte;
#X connect 1 0 3 0;
#X connect 2 0 11 0;
#X connect 3 0 5 0;
#X connect 3 1 7 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 5 1 8 0;
#X connect 6 0 9 0;
#X connect 7 0 4 0;
#X connect 7 1 6 0;
#X connect 8 0 6 0;
#X connect 9 0 10 0;
#X connect 10 0 19 0;
#X connect 11 0 12 0;
#X connect 12 0 19 0;
#X connect 13 0 18 0;
#X connect 14 0 2 1;
#X connect 15 0 6 1;
#X connect 16 0 13 0;
#X connect 17 0 1 0;
#X connect 18 0 17 0;
#X connect 18 1 17 1;
#X restore 57 138 pd get.detect.actif;
#X obj 315 28 declare -path pd-osc/;
#X text 5 366 players;
#N canvas 161 94 450 300 ambiance.loop 0;
#X obj 53 68 r ambiance.ended;
#X obj 53 90 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 53 114 send ambiance.replay;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 152 385 pd ambiance.loop;
#N canvas 647 104 533 542 osc 0;
#X obj 44 70 oReceive 8000;
#X obj 44 29 r osc.port.in;
#X obj 82 164 send;
#X obj 250 24 r pd.send;
#X obj 119 101 oRemSlash;
#X obj 119 124 symbol;
#X obj 260 231 r synchrone.out;
#X obj 260 262 list prepend connect;
#X obj 21 198 r ecouteur;
#X msg 17 243 /synchrone \$1;
#X obj 60 482 oSend;
#X obj 268 318 r synchronie.next.reset;
#X obj 268 341 t b;
#X msg 234 72 \; synchronie.next.reset 1;
#X msg 234 113 \; synchronie.next 1;
#X msg 157 201 /synchronie.remote.timer.ended \$1;
#X obj 158 171 r synchronie.timer.ended;
#X msg 268 374 /synchronie.next.reset.remote 1;
#X obj 83 284 r toRemoteSynchronie;
#X obj 115 321 r synchronie.next.index;
#X obj 63 346 f;
#X obj 83 324 t b;
#X msg 63 372 /SYNCHRONIE.remote \$1;
#X obj 176 454 print remoteSynchronieOSC;
#X connect 0 1 2 0;
#X connect 0 2 4 0;
#X connect 1 0 0 0;
#X connect 4 0 5 0;
#X connect 5 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 10 1;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 11 0 12 0;
#X connect 12 0 17 0;
#X connect 15 0 10 0;
#X connect 16 0 15 0;
#X connect 17 0 10 0;
#X connect 18 0 21 0;
#X connect 19 0 20 1;
#X connect 20 0 22 0;
#X connect 21 0 20 0;
#X connect 22 0 10 0;
#X connect 22 0 23 0;
#X restore 58 29 pd osc;
#N canvas 180 407 450 300 soundOutput 0;
#X obj 25 50 catch~ chan1;
#X obj 68 75 catch~ chan2;
#X obj 281 44 loadbang;
#X msg 281 111 \; pd dsp 1;
#X obj 280 75 del 100;
#X obj 118 165 line~;
#X msg 118 137 \$1 50;
#X obj 68 192 *~;
#X obj 23 193 *~;
#X obj 23 222 dac~ 1 2;
#X obj 118 105 r soundOutput.vol;
#X connect 0 0 8 0;
#X connect 1 0 7 0;
#X connect 2 0 4 0;
#X connect 4 0 3 0;
#X connect 5 0 7 1;
#X connect 5 0 8 1;
#X connect 6 0 5 0;
#X connect 7 0 9 1;
#X connect 8 0 9 0;
#X connect 10 0 6 0;
#X restore 58 50 pd soundOutput;
#N canvas 0 22 450 300 state-AMBIANCE.ACTIF 0;
#X obj 18 55 sel 1;
#X obj 18 31 change;
#X obj 18 6 p.statedelay AMBIANCE.ACTIF;
#X msg 19 81 \; ambiance.normal bang;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X restore 55 230 pd state-AMBIANCE.ACTIF;
#X obj 37 446 p.player synchronie;
#N canvas 630 173 480 560 function-SYNCHRONIE 0;
#X obj 20 381 sel 1;
#X obj 135 17 r SYNCHRONIE;
#X obj 130 78 p.timer synchronie;
#X msg 88 170 \; synchronie.ended 0;
#X msg 44 264 \; synchronie.play bang;
#X msg 27 302 \; synchronie.normal bang;
#X obj 20 348 r synchronie.ended;
#X msg 37 542 \; synchronie.timer 1;
#X msg 68 209 \; synchronie.next bang;
#X msg 231 192 \; synchronie.remote.timer.ended 0;
#X obj 20 404 t b b b b;
#X obj 26 67 t b;
#X obj 25 102 t b b b b b b;
#X obj 87 150 del 400;
#X obj 230 165 del 500;
#X obj 289 37 r SYNCHRONIE.remote;
#X msg 296 152 \; synchronie.play bang;
#X obj 290 94 t b a;
#X msg 319 115 \; synchronie.next.index.set \$1;
#X obj 223 13 del 500;
#X obj 144 46 t b b;
#X msg 208 47 1;
#X msg 237 47 0;
#X obj 291 68 spigot;
#X obj 300 16 loadbang;
#X connect 0 0 10 0;
#X connect 1 0 11 0;
#X connect 1 0 20 0;
#X connect 6 0 0 0;
#X connect 10 1 7 0;
#X connect 11 0 12 0;
#X connect 12 0 5 0;
#X connect 12 1 4 0;
#X connect 12 2 8 0;
#X connect 12 3 13 0;
#X connect 12 4 14 0;
#X connect 13 0 3 0;
#X connect 14 0 9 0;
#X connect 15 0 23 0;
#X connect 17 0 16 0;
#X connect 17 0 14 0;
#X connect 17 0 13 0;
#X connect 17 0 5 0;
#X connect 17 1 18 0;
#X connect 19 0 21 0;
#X connect 20 0 19 0;
#X connect 20 1 22 0;
#X connect 21 0 23 1;
#X connect 22 0 23 1;
#X connect 23 0 17 0;
#X connect 24 0 21 0;
#X restore 53 324 pd function-SYNCHRONIE;
#N canvas 531 174 347 406 function-DETECTION 0;
#X msg 52 428 \; detection.timer 1;
#X obj 26 19 r DETECTION;
#X obj 51 363 t b b;
#X obj 70 62 p.timer detection;
#X msg 78 387 \; detection.shuffle bang;
#X msg 63 180 \; detection.play bang;
#X msg 64 216 \; detection.normal bang;
#X obj 28 118 t b b b;
#X obj 52 298 r detection.ended;
#X obj 52 331 sel 1;
#X msg 69 144 \; detection.ended 0;
#X connect 1 0 7 0;
#X connect 2 0 0 0;
#X connect 2 1 4 0;
#X connect 7 0 6 0;
#X connect 7 1 5 0;
#X connect 7 2 10 0;
#X connect 8 0 9 0;
#X connect 9 0 2 0;
#X restore 54 301 pd function-DETECTION;
#X text 6 94 Sensors;
#X text 7 6 IO;
#X text 276 89 init;
#X text 241 4 Dependencies;
#X obj 310 151 text define -k init;
#A set circonstance.new.timer.ended 0 \; circonstance.old.timer.ended
0 \; circonstance.flag 0 \; synchronie.ended 1 \; detection.ended 1
\; ambiance.path /am/ \; circonstance.path /ci/ \; detection.path /de/
\; synchronie.path /sy/ \; ambiance.fadein.fadetime 2000 \; ambiance.count
1 \; circonstance.cut.vol 0 \; circonstance.cut.fadetime 500 \; synchronie.fadeout.vol
0.01 \; synchronie.fadeout.fadetime 10000 \; synchronie.cut.vol 0 \;
synchronie.cut.fadetime 500 \; detection.fadeout.vol 0.01 \; detection.fadeout.fadetime
10000 \; detection.cut.vol 0 \; detection.cut.fadetime 500 \; ambiance.shuffle
bang \; ambiance.play bang \; detecte.shuffle bang \; ecouteur 0 \;
detecte 0 \; synchrone 0 \; synchronie.timer 1 \; synchronie.next.reset
bang \; synchronie.timer.ended 1 \; synchronie.remote.timer.ended 1
\; synchronie.next.reset 1 \; state AMBIANCE.VEILLE \;;
#N canvas 552 447 593 548 ->SYNCHRONIE 0;
#X obj 28 2 r ecouteur;
#X obj 24 121 == 1;
#X obj 20 240 list.sum;
#X obj 58 141 t b a;
#X obj 96 141 t b a;
#X obj 97 121 == 1;
#X floatatom 33 276 5 0 0 0 - - -, f 5;
#X obj 58 121 == 1;
#X obj 98 45 r synchronie.timer.ended;
#X msg 20 330 \; SYNCHRONIE bang;
#X obj 135 141 t b a;
#X obj 136 121 == 1;
#X obj 61 22 r synchrone;
#X obj 137 68 r synchronie.ended;
#X obj 178 141 t b a;
#X obj 179 121 == 1;
#X obj 179 93 r synchronie.remote.timer.ended;
#X obj 20 305 sel 5;
#X obj 21 218 pack f f f f f;
#X obj 174 215 print synch-Ecouteur;
#X obj 192 193 print synch-Synchrone;
#X obj 207 171 print synch-timer.ended;
#X obj 221 149 print synch.ended;
#X obj 244 132 print remote.timer.ended;
#X obj 133 265 print synchronieFunctionTotal;
#X obj 165 339 s toRemoteSynchronie;
#X obj 169 315 print to remote synchrone;
#X connect 0 0 1 0;
#X connect 0 0 19 0;
#X connect 1 0 18 0;
#X connect 2 0 6 0;
#X connect 2 0 17 0;
#X connect 2 0 24 0;
#X connect 3 0 18 0;
#X connect 3 1 18 1;
#X connect 4 0 18 0;
#X connect 4 1 18 2;
#X connect 5 0 4 0;
#X connect 7 0 3 0;
#X connect 8 0 5 0;
#X connect 8 0 21 0;
#X connect 10 0 18 0;
#X connect 10 1 18 3;
#X connect 11 0 10 0;
#X connect 12 0 7 0;
#X connect 12 0 20 0;
#X connect 13 0 11 0;
#X connect 13 0 22 0;
#X connect 14 0 18 0;
#X connect 14 1 18 4;
#X connect 15 0 14 0;
#X connect 16 0 15 0;
#X connect 16 0 23 0;
#X connect 17 0 9 0;
#X connect 17 0 25 0;
#X connect 17 0 26 0;
#X connect 18 0 2 0;
#X restore 422 96 pd ->SYNCHRONIE;
#X obj 37 385 p.player ambiance;
#X obj 37 405 p.player circonstance;
#X obj 37 425 p.player detection;
#X restore 278 75 pd posteEcoute;
#X obj 228 149 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 17 147 var synchronie.remote.timer.ended;
#X connect 3 0 7 1;
#X connect 7 1 3 0;
#X connect 8 0 27 1;
#X connect 9 1 10 0;
#X connect 10 0 9 1;
#X connect 11 0 12 1;
#X connect 12 1 11 0;
#X connect 13 1 14 0;
#X connect 14 0 13 1;
#X connect 15 1 16 0;
#X connect 16 0 15 1;
#X connect 18 0 19 1;
#X connect 19 1 18 0;
#X connect 20 0 22 1;
#X connect 22 1 20 0;
#X connect 23 0 25 1;
#X connect 25 1 23 0;
#X connect 27 1 8 0;
#X connect 28 0 33 0;
#X connect 28 0 2 0;
#X connect 29 0 36 1;
#X connect 31 0 37 1;
#X connect 36 1 29 0;
#X connect 37 1 31 0;
#X connect 39 0 40 1;
#X connect 40 1 39 0;
